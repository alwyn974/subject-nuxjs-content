---
title: "Scripting Bash"
description: "Introduction au scripting Bash : variables, boucles, conditions et entrées utilisateur."
---

## Scripts

Vous pouvez écrire des scripts dans le shell pour automatiser des tâches. Un script est un fichier contenant une série de commandes qui peuvent être exécutées ensemble.
Pour créer un script, vous pouvez utiliser n'importe quel éditeur de texte (comme `micro` ou `nano`) et enregistrer le fichier avec une extension `.sh`.

Pour rendre le script exécutable, vous devez changer ses permissions en utilisant `chmod` :

```bash
chmod +x my_script.sh
```

Pour exécuter le script, vous pouvez utiliser :

```bash
./my_script.sh
```

### Exemple de script

La première ligne d'un script (`#!/bin/bash`) est appelée un shebang. Elle indique au système quel interpréteur utiliser pour exécuter le script.

```bash
#!/bin/bash
```

### Enchaînement de commandes

Vous pouvez enchaîner plusieurs commandes dans un script en utilisant des points-virgules (`;`) ou des retours à la ligne. Les commandes s'exécuteront séquentiellement.

```bash
#!/bin/bash
echo "Première commande"
echo "Deuxième commande"
```

### Lecture depuis stdin

Vous pouvez lire l'entrée de l'utilisateur ou depuis stdin en utilisant la commande `read`.

```bash
#!/bin/bash
read name
echo "Bonjour, $name"
```

### Conditions et boucles

Vous pouvez utiliser des instructions conditionnelles et des boucles pour contrôler le flux de votre script.

::code-group
```bash [if/else]
#!/bin/bash
if [ condition ]; then
    # commandes
elif [ condition ]; then
    # commandes
else
    # commandes
fi
```

```bash [case]
#!/bin/bash
case $variable in
    value1)
        # commandes
        ;;
    value2)
        # commandes
        ;;
    *)
        # commandes par défaut
        ;;
esac
```

```bash [while]
#!/bin/bash
while [ condition ]; do
    # commandes
done
```
::

### Sous-shells

Vous pouvez exécuter une commande et capturer sa sortie en utilisant `$(command)` ou des backticks. C'est ce qu'on appelle la substitution de commande.

```bash
#!/bin/bash
current_date=$(date)
echo "Aujourd'hui est $current_date"
```

### Exercices Pratiques

#### Script "Greet"
Créez un script nommé `greet.sh` qui :
- Lit un nom depuis stdin
- Utilise une instruction if pour vérifier si le nom est vide
- Si le nom n'est pas vide, affiche "Bonjour, [name] !"
- Si le nom est vide, affiche "Bonjour, étranger !"
Rendez le script exécutable et exécutez-le.

#### Script "Counter"
Créez un script nommé `counter.sh` qui :
- Utilise une boucle while pour compter de 1 à 5
- Affiche chaque nombre sur une nouvelle ligne
Rendez le script exécutable et exécutez-le.

#### Script "File Info"
Créez un script nommé `file_info.sh` qui :
- Prend un nom de fichier comme argument
- Utilise une instruction if pour vérifier si le fichier existe
- Si le fichier existe, utilise la substitution de commande pour obtenir la taille du fichier et affiche "Le fichier [filename] existe et fait [size] octets"
- Si le fichier n'existe pas, affiche "Le fichier [filename] n'existe pas"
Rendez le script exécutable et exécutez-le avec un nom de fichier comme argument.
