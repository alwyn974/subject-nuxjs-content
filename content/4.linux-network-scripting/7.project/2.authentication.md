---
title: "Partie 2 : Authentification"
description: "Ajout de la sécurité et de l'authentification avec SHA256."
---

## Partie 2 : Authentification et Sécurité

### Objectif

Améliorez votre serveur de fichiers en ajoutant l'authentification pour garantir que seuls les utilisateurs autorisés peuvent téléverser des fichiers. La commande `put` doit maintenant exiger un nom d'utilisateur et un mot de passe.

### Comprendre le hachage SHA256

SHA256 est une fonction de hachage cryptographique qui prend des données d'entrée et produit une valeur de hachage de taille fixe (256 bits). La même entrée produira toujours le même hachage, mais il est très difficile d'inverser le processus.
Cela rend le hachage utile pour stocker les mots de passe de manière sécurisée.

### Créer une base de données d'authentification

Pour générer un hachage pour un utilisateur :
```bash
printf "username:password" | sha256sum
```

Pour stocker cela dans un fichier de base de données d'authentification :
```bash
printf "username:password" | sha256sum > auth_db
```

### Vérifier l'authentification

Pour vérifier si une combinaison nom d'utilisateur et mot de passe est valide, vous devez :
1. Combiner le nom d'utilisateur et le mot de passe au format "username:password"
2. Calculer son hachage SHA256
3. Vérifier si ce hachage existe dans le fichier `auth_db`

Exemple de vérification :
```bash
printf "username:password" | sha256sum -c auth_db
```

### Exigences

1. **Créer une base de données d'authentification** : Créez un fichier nommé `auth_db` avec les identifiants des utilisateurs. Ajoutez au moins deux utilisateurs de test à la base de données.
2. **Modifier la commande `put` dans votre script serveur** :
   - Changez le format de commande de `put <file> <base64_data>` à `put <user> <password> <file> <base64_data>`
   - Extrayez le nom d'utilisateur et le mot de passe
   - Vérifiez le hachage contre `auth_db`
   - Procédez uniquement si l'authentification réussit
3. **Mettre à jour la commande `help`** : Changez le message d'aide pour refléter le nouveau format de commande `put`.

::alert{type="tip"}
**Indices pour l'implémentation :**
- Pour la vérification : `printf "$username:$password" | sha256sum -c auth_db 2>/dev/null | grep -q "OK"`
- Utilisez `continue` pour ignorer la commande si l'authentification échoue
::
